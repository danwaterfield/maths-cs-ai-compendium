<svg width="720" height="270" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="rag-arrow" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#555"/>
    </marker>
  </defs>
  <text x="360" y="22" fill="#333" font-size="14" font-weight="bold" text-anchor="middle">Retrieval-Augmented Generation (RAG)</text>

  <!-- Query -->
  <rect x="20" y="90" width="130" height="45" rx="8" fill="#f39c12" opacity="0.12" stroke="#f39c12" stroke-width="2"/>
  <text x="85" y="110" fill="#f39c12" font-size="11" text-anchor="middle" font-weight="bold">Query</text>
  <text x="85" y="125" fill="#f39c12" font-size="9" text-anchor="middle">"When was the</text>
  <text x="85" y="137" fill="#f39c12" font-size="9" text-anchor="middle">Eiffel Tower built?"</text>

  <!-- Arrow to retriever -->
  <line x1="150" y1="112" x2="185" y2="80" stroke="#555" stroke-width="1.5" marker-end="url(#rag-arrow)"/>
  <line x1="150" y1="112" x2="185" y2="145" stroke="#555" stroke-width="1.5" marker-end="url(#rag-arrow)"/>

  <!-- Retriever -->
  <rect x="190" y="50" width="100" height="50" rx="8" fill="#3498db" opacity="0.12" stroke="#3498db" stroke-width="2"/>
  <text x="240" y="72" fill="#3498db" font-size="11" text-anchor="middle" font-weight="bold">Retriever</text>
  <text x="240" y="88" fill="#3498db" font-size="9" text-anchor="middle">DPR / BM25</text>

  <!-- Knowledge base -->
  <rect x="190" y="120" width="100" height="60" rx="8" fill="#95a5a6" opacity="0.1" stroke="#95a5a6" stroke-width="1.5"/>
  <text x="240" y="140" fill="#555" font-size="9" text-anchor="middle" font-weight="bold">Knowledge Base</text>
  <rect x="200" y="148" width="80" height="10" rx="2" fill="#95a5a6" opacity="0.2"/>
  <rect x="200" y="160" width="80" height="10" rx="2" fill="#95a5a6" opacity="0.2"/>

  <!-- Arrow retriever to docs -->
  <line x1="240" y1="100" x2="240" y2="118" stroke="#3498db" stroke-width="1" stroke-dasharray="3,2"/>

  <!-- Retrieved passages -->
  <line x1="290" y1="75" x2="340" y2="75" stroke="#555" stroke-width="1.5" marker-end="url(#rag-arrow)"/>
  <text x="315" y="67" fill="#666" font-size="8" text-anchor="middle">top-k</text>

  <rect x="345" y="45" width="165" height="75" rx="8" fill="#27ae60" opacity="0.08" stroke="#27ae60" stroke-width="1.5"/>
  <text x="427" y="62" fill="#27ae60" font-size="10" text-anchor="middle" font-weight="bold">Retrieved Passages</text>
  <rect x="355" y="70" width="145" height="16" rx="3" fill="#27ae60" opacity="0.12"/>
  <text x="427" y="82" fill="#555" font-size="8" text-anchor="middle">"The Eiffel Tower was constructed</text>
  <rect x="355" y="90" width="145" height="16" rx="3" fill="#27ae60" opacity="0.12"/>
  <text x="427" y="102" fill="#555" font-size="8" text-anchor="middle">from 1887 to 1889 in Paris..."</text>

  <!-- Arrow query to reader -->
  <line x1="150" y1="120" x2="393" y2="148" stroke="#f39c12" stroke-width="1" stroke-dasharray="4,3"/>

  <!-- Reader (LLM) -->
  <rect x="355" y="135" width="145" height="55" rx="8" fill="#e74c3c" opacity="0.1" stroke="#e74c3c" stroke-width="2"/>
  <text x="427" y="157" fill="#e74c3c" font-size="11" text-anchor="middle" font-weight="bold">Reader (LLM)</text>
  <text x="427" y="172" fill="#e74c3c" font-size="9" text-anchor="middle">Context + Query</text>
  <text x="427" y="184" fill="#e74c3c" font-size="8" text-anchor="middle">â†’ Generate answer</text>

  <!-- Arrows from passages and query to reader -->
  <line x1="427" y1="120" x2="427" y2="133" stroke="#555" stroke-width="1.5" marker-end="url(#rag-arrow)"/>

  <!-- Output -->
  <line x1="500" y1="162" x2="540" y2="162" stroke="#555" stroke-width="1.5" marker-end="url(#rag-arrow)"/>

  <rect x="545" y="135" width="155" height="55" rx="8" fill="#9b59b6" opacity="0.1" stroke="#9b59b6" stroke-width="2"/>
  <text x="622" y="155" fill="#9b59b6" font-size="11" text-anchor="middle" font-weight="bold">Answer</text>
  <text x="622" y="172" fill="#9b59b6" font-size="10" text-anchor="middle">"It was built from</text>
  <text x="622" y="185" fill="#9b59b6" font-size="10" text-anchor="middle">1887 to 1889."</text>

  <!-- Benefits -->
  <rect x="60" y="210" width="600" height="48" rx="8" fill="#f5f5f5" stroke="#ddd" stroke-width="1"/>
  <text x="160" y="230" fill="#27ae60" font-size="10" text-anchor="middle" font-weight="bold">Updatable knowledge</text>
  <text x="160" y="245" fill="#666" font-size="9" text-anchor="middle">No retraining needed</text>
  <text x="360" y="230" fill="#3498db" font-size="10" text-anchor="middle" font-weight="bold">Grounded answers</text>
  <text x="360" y="245" fill="#666" font-size="9" text-anchor="middle">Reduces hallucination</text>
  <text x="560" y="230" fill="#9b59b6" font-size="10" text-anchor="middle" font-weight="bold">Source citations</text>
  <text x="560" y="245" fill="#666" font-size="9" text-anchor="middle">Can reference passages</text>
</svg>